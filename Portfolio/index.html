<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Dylan Samaan's Portfolio</title>

  <!-- main stylesheet -->
  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="home">
  <div class="hud">
    <div class="screen">

      <!-- main title -->
      <h1 class="hud-title">Dylan Samaan</h1>

      <!-- menu buttons -->
      <div class="menu-buttons">

        <!-- arcade page button -->
        <button data-link="sandman-arcade/" data-desc="My trio of Arcade-style minigames (p5.js / Java).">
          My Arcade
        </button>

        <!-- gallery page button -->
        <button data-link="gallery.html" data-desc="A gallery of digital artworks I've created over the years.">
          Gallery
        </button>

        <!-- about page button -->
        <button data-link="about.html" data-desc="My motivation, my goals, and more information.">
          About Me
        </button>

      </div>
    </div>

    <!-- speech bubble container -->
    <div id="speech" class="speech-pop" aria-live="polite">
      <p id="speechText"></p>
    </div>
  </div>

  <!-- hover sound effect -->
  <audio id="hoverSound" src="assets/sounds/hover.mp3" preload="auto"></audio>

  <script>

    // get main elements from the page
    const menu = document.querySelector(".menu-buttons");
    const speech = document.getElementById("speech");
    const speechText = document.getElementById("speechText");
    const hoverSound = document.getElementById("hoverSound");

    // sound timing control variables
    let lastPlayed = 0; // stores last sound time
    const soundCooldown = 120; // delay between sounds
    const hideDelay = 120; // delay before hiding bubble
    let hideTimer = null; // stores timeout id

    // plays hover sound with cooldown
    function playHoverSound() {
      const now = performance.now(); // current time

      if (now - lastPlayed < soundCooldown) return; // stops if too soon

      lastPlayed = now; // update last played time
      hoverSound.currentTime = 0; // reset sound
      hoverSound.volume = 0.8; // lower volume
      hoverSound.play().catch(() => { }); // play safely
    }

    // shows speech bubble with text
    function showBubble(text) {
      if (hideTimer) clearTimeout(hideTimer); // cancel hide timer

      speechText.textContent = text; // update text
      speech.classList.add("visible"); // make bubble visible
    }

    // hides speech bubble after delay
    function hideBubble() {
      if (hideTimer) clearTimeout(hideTimer); // cancel old timer

      hideTimer = setTimeout(() => {
        speech.classList.remove("visible"); // hide bubble
      }, hideDelay);
    }

    // handles hover events on menu
    menu.addEventListener("pointerover", (e) => {

      const btn = e.target.closest("button"); // checks if button
      if (!btn) return; // ignore if not

      showBubble(btn.dataset.desc || ""); // show description
      playHoverSound(); // play sound
    });

    // hides bubble when mouse leaves menu
    menu.addEventListener("pointerleave", hideBubble);

    // handles button clicks
    menu.addEventListener("click", (e) => {

      const btn = e.target.closest("button"); // checks if button
      if (!btn) return; // ignore if not

      window.location.href = btn.dataset.link; // go to page
    });

    // handles keyboard focus
    menu.addEventListener("focusin", (e) => {

      const btn = e.target.closest("button"); // checks if button
      if (!btn) return; // ignore if not

      showBubble(btn.dataset.desc || ""); // show description
      playHoverSound(); // play sound
    });

    // hides bubble when focus leaves menu
    menu.addEventListener("focusout", (e) => {

      const next = e.relatedTarget; // element gaining focus
      if (next && menu.contains(next)) return; // ignore if still inside

      hideBubble(); // hide bubble
    });

  </script>
</body>

</html>