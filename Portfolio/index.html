<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Dylan Samaan â€” Portfolio</title>

  <!-- shared styles -->
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <div class="hud">
    <div class="screen">
      <h1 class="hud-title">Dylan Samaan</h1>

      <div class="menu-buttons">
        <button data-link="sandman-arcade/" data-desc="My trio of Arcade-style minigames (p5.js / Java).">
          My Arcade
        </button>

        <button data-link="gallery.html" data-desc="A gallery of digital artworks I've created over the years.">
          Gallery
        </button>

        <button data-link="about.html" data-desc="My motivation, my goals, and more information.">
          About Me
        </button>
      </div>
    </div>

    <!-- speech bubble -->
    <div id="speech" class="speech-pop" aria-live="polite">
      <p id="speechText"></p>
    </div>
  </div>

  <!-- hover sound -->
  <audio id="hoverSound" src="assets/sounds/hover.mp3" preload="auto"></audio>

  <script>
    // grab the parts we need
    const menu = document.querySelector(".menu-buttons");
    const speech = document.getElementById("speech");
    const speechText = document.getElementById("speechText");
    const hoverSound = document.getElementById("hoverSound");

    // basic settings
    let lastPlayed = 0;
    const soundCooldown = 120;
    const hideDelay = 120;
    let hideTimer = null;

    // play the hover sound (with a small cooldown)
    function playHoverSound() {
      const now = performance.now();
      if (now - lastPlayed < soundCooldown) return;

      lastPlayed = now;
      hoverSound.currentTime = 0;
      hoverSound.volume = 0.3;
      hoverSound.play().catch(() => { });
    }

    // show the bubble text
    function showBubble(text) {
      if (hideTimer) clearTimeout(hideTimer);
      speechText.textContent = text;
      speech.classList.add("visible");
    }

    // hide the bubble after a short delay
    function hideBubble() {
      if (hideTimer) clearTimeout(hideTimer);
      hideTimer = setTimeout(() => speech.classList.remove("visible"), hideDelay);
    }

    // handle hover and click using one listener
    menu.addEventListener("pointerover", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      // update bubble text
      showBubble(btn.dataset.desc || "");

      // play the ui sound
      playHoverSound();
    });

    // hide bubble when leaving the menu area
    menu.addEventListener("pointerleave", hideBubble);

    // go to the page when you click a button
    menu.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      // open the link for that button
      window.location.href = btn.dataset.link;
    });

    // show bubble + sound for keyboard focus
    menu.addEventListener("focusin", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      // update bubble text
      showBubble(btn.dataset.desc || "");

      // play the ui sound
      playHoverSound();
    });

    // hide bubble when focus leaves the menu
    menu.addEventListener("focusout", (e) => {
      const next = e.relatedTarget;
      if (next && menu.contains(next)) return;

      // remove bubble
      hideBubble();
    });
  </script>
</body>

</html>